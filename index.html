<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Visa Card</title>
</head>
<body>
    <form id="visa-form">
        <label for="amount">Amount:</label>
        <input type="text" id="amount" name="amount" required>
        <label for="recipientAccount">Recipient Account Number:</label>
        <input type="text" id="recipientAccount" name="recipientAccount" required>
        <button type="submit">Create Card</button>
    </form>
    <script >document.getElementById('visa-form').addEventListener('submit', async function(event) {
    event.preventDefault();

    const amount = document.getElementById('amount').value;
    const recipientAccount = document.getElementById('recipientAccount').value;

    const requestBody = {
        "amount": amount,
        "cardAcceptor": {
            "address": {
                "country": "USA",
                "zipCode": "94404"
            },
            "idCode": "ABCD1234ABCD123",
            "name": "Visa Inc. USA-Foster City",
            "terminalId": "ABCD1234"
        },
        "localTransactionDateTime": new Date().toISOString(),
        "recipientPrimaryAccountNumber": recipientAccount,
        "retrievalReferenceNumber": "330000550000",
        "senderAccountNumber": recipientAccount,
        "senderName": "John Doe",
        "systemsTraceAuditNumber": Math.floor(Math.random() * 1000000).toString()
    };

    try {
        const response = await fetch('https://api.visa.com/visadirect/fundstransfer/v1/pullfundstransactions', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': 'Basic ' + btoa('7CYJSARJVICDS059ER6421H--7xFFRuJ8uafHA1dPfJI-7Eno:R25nZ{MuORayFLhX7Uqf$18k41d28qQ@LAvX5PjS')
            },
            body: JSON.stringify(requestBody)
        });

        if (response.ok) {
            const data = await response.json();
            console.log('Card Created:', data);
        } else {
            const errorData = await response.json();
            console.error('Error:', errorData);
        }
    } catch (error) {
        console.error('Error:', error);
    }
});
</script>
</body>
</html>
